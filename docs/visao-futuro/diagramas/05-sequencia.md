# Diagramas de Sequência
## LicitaFit - Sistema de Análise de Aderência a Editais

---

## 1. Sequência: Análise Completa de Edital

```
┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                            DIAGRAMA DE SEQUÊNCIA: ANÁLISE COMPLETA                                              │
├─────────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                                                 │
│   Usuário        MainWindow     EditalService    PDFProcessor    RAGEngine     AnaliseService    Database      │
│      │               │               │               │               │               │               │         │
│      │   1. Upload   │               │               │               │               │               │         │
│      │   PDF         │               │               │               │               │               │         │
│      │──────────────▶│               │               │               │               │               │         │
│      │               │               │               │               │               │               │         │
│      │               │  2. importar  │               │               │               │               │         │
│      │               │  _edital()    │               │               │               │               │         │
│      │               │──────────────▶│               │               │               │               │         │
│      │               │               │               │               │               │               │         │
│      │               │               │  3. extract   │               │               │               │         │
│      │               │               │  _text()      │               │               │               │         │
│      │               │               │──────────────▶│               │               │               │         │
│      │               │               │               │               │               │               │         │
│      │               │               │  4. texto     │               │               │               │         │
│      │               │               │◀──────────────│               │               │               │         │
│      │               │               │               │               │               │               │         │
│      │               │               │  5. extrair   │               │               │               │         │
│      │               │               │  _requisitos()│               │               │               │         │
│      │               │               │──────────────────────────────▶│               │               │         │
│      │               │               │               │               │               │               │         │
│      │               │               │               │  6. consultar │               │               │         │
│      │               │               │               │  _base_rag()  │               │               │         │
│      │               │               │               │──────────────▶│               │               │         │
│      │               │               │               │               │               │               │         │
│      │               │               │               │  7. requisitos│               │               │         │
│      │               │               │◀──────────────────────────────│               │               │         │
│      │               │               │               │               │               │               │         │
│      │               │               │  8. salvar    │               │               │               │         │
│      │               │               │  _edital()    │               │               │               │         │
│      │               │               │──────────────────────────────────────────────────────────────▶│         │
│      │               │               │               │               │               │               │         │
│      │               │  9. edital_id │               │               │               │               │         │
│      │               │◀──────────────│               │               │               │               │         │
│      │               │               │               │               │               │               │         │
│      │  10. Exibir   │               │               │               │               │               │         │
│      │  requisitos   │               │               │               │               │               │         │
│      │◀──────────────│               │               │               │               │               │         │
│      │               │               │               │               │               │               │         │
│      │  11. Validar  │               │               │               │               │               │         │
│      │  requisitos   │               │               │               │               │               │         │
│      │──────────────▶│               │               │               │               │               │         │
│      │               │               │               │               │               │               │         │
│      │  12. Executar │               │               │               │               │               │         │
│      │  análise      │               │               │               │               │               │         │
│      │──────────────▶│               │               │               │               │               │         │
│      │               │               │               │               │               │               │         │
│      │               │  13. executar │               │               │               │               │         │
│      │               │  _analise()   │               │               │               │               │         │
│      │               │──────────────────────────────────────────────▶│               │               │         │
│      │               │               │               │               │               │               │         │
│      │               │               │               │               │  14. buscar   │               │         │
│      │               │               │               │               │  perfil()     │               │         │
│      │               │               │               │               │──────────────────────────────▶│         │
│      │               │               │               │               │               │               │         │
│      │               │               │               │               │  15. calcular │               │         │
│      │               │               │               │               │  _score()     │               │         │
│      │               │               │               │               │───────┐       │               │         │
│      │               │               │               │               │       │       │               │         │
│      │               │               │               │               │◀──────┘       │               │         │
│      │               │               │               │               │               │               │         │
│      │               │               │               │               │  16. identificar              │         │
│      │               │               │               │               │  _gaps()      │               │         │
│      │               │               │               │               │───────┐       │               │         │
│      │               │               │               │               │       │       │               │         │
│      │               │               │               │               │◀──────┘       │               │         │
│      │               │               │               │               │               │               │         │
│      │               │               │               │               │  17. salvar   │               │         │
│      │               │               │               │               │  _analise()   │               │         │
│      │               │               │               │               │──────────────────────────────▶│         │
│      │               │               │               │               │               │               │         │
│      │               │  18. resultado│               │               │               │               │         │
│      │               │◀──────────────────────────────────────────────│               │               │         │
│      │               │               │               │               │               │               │         │
│      │  19. Exibir   │               │               │               │               │               │         │
│      │  resultado    │               │               │               │               │               │         │
│      │◀──────────────│               │               │               │               │               │         │
│      │               │               │               │               │               │               │         │
│                                                                                                                 │
└─────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

---

## 2. Sequência: Cadastro de Empresa

```
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                    DIAGRAMA DE SEQUÊNCIA: CADASTRO DE EMPRESA                       │
├─────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                     │
│   Usuário        EmpresaDialog   EmpresaService   CNPJValidator    Database        │
│      │               │               │               │               │             │
│      │  1. Nova      │               │               │               │             │
│      │  Empresa      │               │               │               │             │
│      │──────────────▶│               │               │               │             │
│      │               │               │               │               │             │
│      │  2. Exibir    │               │               │               │             │
│      │  formulário   │               │               │               │             │
│      │◀──────────────│               │               │               │             │
│      │               │               │               │               │             │
│      │  3. Informa   │               │               │               │             │
│      │  CNPJ         │               │               │               │             │
│      │──────────────▶│               │               │               │             │
│      │               │               │               │               │             │
│      │               │  4. validar   │               │               │             │
│      │               │  _cnpj()      │               │               │             │
│      │               │──────────────────────────────▶│               │             │
│      │               │               │               │               │             │
│      │               │               │  5. verificar │               │             │
│      │               │               │  _existente() │               │             │
│      │               │               │──────────────────────────────▶│             │
│      │               │               │               │               │             │
│      │               │               │  6. não existe│               │             │
│      │               │               │◀──────────────────────────────│             │
│      │               │               │               │               │             │
│      │               │  7. CNPJ OK   │               │               │             │
│      │               │◀──────────────────────────────│               │             │
│      │               │               │               │               │             │
│      │  8. Preenche  │               │               │               │             │
│      │  dados        │               │               │               │             │
│      │──────────────▶│               │               │               │             │
│      │               │               │               │               │             │
│      │  9. Clica     │               │               │               │             │
│      │  Salvar       │               │               │               │             │
│      │──────────────▶│               │               │               │             │
│      │               │               │               │               │             │
│      │               │  10. criar    │               │               │             │
│      │               │  _empresa()   │               │               │             │
│      │               │──────────────▶│               │               │             │
│      │               │               │               │               │             │
│      │               │               │  11. INSERT   │               │             │
│      │               │               │──────────────────────────────▶│             │
│      │               │               │               │               │             │
│      │               │               │  12. empresa  │               │             │
│      │               │               │  _id          │               │             │
│      │               │               │◀──────────────────────────────│             │
│      │               │               │               │               │             │
│      │               │  13. sucesso  │               │               │             │
│      │               │◀──────────────│               │               │             │
│      │               │               │               │               │             │
│      │  14. Empresa  │               │               │               │             │
│      │  cadastrada   │               │               │               │             │
│      │◀──────────────│               │               │               │             │
│      │               │               │               │               │             │
│                                                                                     │
└─────────────────────────────────────────────────────────────────────────────────────┘
```

---

## 3. Sequência: Geração de Relatório

```
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                    DIAGRAMA DE SEQUÊNCIA: GERAÇÃO DE RELATÓRIO                      │
├─────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                     │
│   Usuário      RelatorioWidget  RelatorioService  TemplateEngine   PDFGenerator    │
│      │               │               │               │               │             │
│      │  1. Gerar     │               │               │               │             │
│      │  Relatório    │               │               │               │             │
│      │──────────────▶│               │               │               │             │
│      │               │               │               │               │             │
│      │               │  2. configurar│               │               │             │
│      │               │  _opcoes()    │               │               │             │
│      │◀──────────────│               │               │               │             │
│      │               │               │               │               │             │
│      │  3. Seleciona │               │               │               │             │
│      │  template     │               │               │               │             │
│      │  (Executivo)  │               │               │               │             │
│      │──────────────▶│               │               │               │             │
│      │               │               │               │               │             │
│      │  4. Adiciona  │               │               │               │             │
│      │  logo         │               │               │               │             │
│      │──────────────▶│               │               │               │             │
│      │               │               │               │               │             │
│      │  5. Clica     │               │               │               │             │
│      │  Gerar        │               │               │               │             │
│      │──────────────▶│               │               │               │             │
│      │               │               │               │               │             │
│      │               │  6. gerar     │               │               │             │
│      │               │  _relatorio() │               │               │             │
│      │               │──────────────▶│               │               │             │
│      │               │               │               │               │             │
│      │               │               │  7. carregar  │               │             │
│      │               │               │  _template()  │               │             │
│      │               │               │──────────────▶│               │             │
│      │               │               │               │               │             │
│      │               │               │  8. template  │               │             │
│      │               │               │◀──────────────│               │             │
│      │               │               │               │               │             │
│      │               │               │  9. popular   │               │             │
│      │               │               │  _dados()     │               │             │
│      │               │               │───────┐       │               │             │
│      │               │               │       │       │               │             │
│      │               │               │◀──────┘       │               │             │
│      │               │               │               │               │             │
│      │               │               │  10. gerar    │               │             │
│      │               │               │  _pdf()       │               │             │
│      │               │               │──────────────────────────────▶│             │
│      │               │               │               │               │             │
│      │               │               │  11. pdf_bytes│               │             │
│      │               │               │◀──────────────────────────────│             │
│      │               │               │               │               │             │
│      │               │  12. preview  │               │               │             │
│      │               │◀──────────────│               │               │             │
│      │               │               │               │               │             │
│      │  13. Exibir   │               │               │               │             │
│      │  preview      │               │               │               │             │
│      │◀──────────────│               │               │               │             │
│      │               │               │               │               │             │
│      │  14. Salvar   │               │               │               │             │
│      │──────────────▶│               │               │               │             │
│      │               │               │               │               │             │
│      │               │  15. salvar   │               │               │             │
│      │               │  _arquivo()   │               │               │             │
│      │               │──────────────▶│               │               │             │
│      │               │               │               │               │             │
│      │  16. Arquivo  │               │               │               │             │
│      │  salvo        │               │               │               │             │
│      │◀──────────────│               │               │               │             │
│      │               │               │               │               │             │
│                                                                                     │
└─────────────────────────────────────────────────────────────────────────────────────┘
```

---

## 4. Sequência: Verificação de Alerta de Vencimento

```
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                 DIAGRAMA DE SEQUÊNCIA: VERIFICAÇÃO DE ALERTAS                       │
├─────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                     │
│   Scheduler       AlertaService   DocumentoRepo     Database      Notification     │
│      │               │               │               │               │             │
│      │  1. verificar │               │               │               │             │
│      │  _vencimentos │               │               │               │             │
│      │  () [cron]    │               │               │               │             │
│      │──────────────▶│               │               │               │             │
│      │               │               │               │               │             │
│      │               │  2. buscar    │               │               │             │
│      │               │  _docs_       │               │               │             │
│      │               │  vencendo()   │               │               │             │
│      │               │──────────────▶│               │               │             │
│      │               │               │               │               │             │
│      │               │               │  3. SELECT    │               │             │
│      │               │               │  WHERE validade               │             │
│      │               │               │  <= now + 30d │               │             │
│      │               │               │──────────────▶│               │             │
│      │               │               │               │               │             │
│      │               │               │  4. docs[]    │               │             │
│      │               │               │◀──────────────│               │             │
│      │               │               │               │               │             │
│      │               │  5. docs[]    │               │               │             │
│      │               │◀──────────────│               │               │             │
│      │               │               │               │               │             │
│      │               │  loop [para cada doc]         │               │             │
│      │               │  ┌────────────────────────────────────────────────────┐    │
│      │               │  │                                                    │    │
│      │               │  │  6. criar_alerta()                                │    │
│      │               │  │───────────────────────────▶│               │      │    │
│      │               │  │               │               │               │   │    │
│      │               │  │  7. notificar │               │               │   │    │
│      │               │  │  _usuario()   │               │               │   │    │
│      │               │  │──────────────────────────────────────────────▶│   │    │
│      │               │  │               │               │               │   │    │
│      │               │  └────────────────────────────────────────────────────┘    │
│      │               │               │               │               │             │
│      │  8. concluído │               │               │               │             │
│      │◀──────────────│               │               │               │             │
│      │               │               │               │               │             │
│                                                                                     │
└─────────────────────────────────────────────────────────────────────────────────────┘
```

---

## 5. Sequência: Match de Requisito com Capacidade

```
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                  DIAGRAMA DE SEQUÊNCIA: MATCH DE REQUISITO                          │
├─────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                     │
│   AnaliseService   MatchEngine   CapacidadeRepo   CertificacaoRepo  DocumentoRepo  │
│      │               │               │               │               │             │
│      │  1. buscar    │               │               │               │             │
│      │  _match()     │               │               │               │             │
│      │──────────────▶│               │               │               │             │
│      │               │               │               │               │             │
│      │               │  2. buscar_por│               │               │             │
│      │               │  _categoria() │               │               │             │
│      │               │──────────────▶│               │               │             │
│      │               │               │               │               │             │
│      │               │  3. capacidades[]             │               │             │
│      │               │◀──────────────│               │               │             │
│      │               │               │               │               │             │
│      │               │  4. buscar_por│               │               │             │
│      │               │  _categoria() │               │               │             │
│      │               │──────────────────────────────▶│               │             │
│      │               │               │               │               │             │
│      │               │  5. certificacoes[]           │               │             │
│      │               │◀──────────────────────────────│               │             │
│      │               │               │               │               │             │
│      │               │  6. buscar_por│               │               │             │
│      │               │  _tipo()      │               │               │             │
│      │               │──────────────────────────────────────────────▶│             │
│      │               │               │               │               │             │
│      │               │  7. documentos[]              │               │             │
│      │               │◀──────────────────────────────────────────────│             │
│      │               │               │               │               │             │
│      │               │  8. avaliar   │               │               │             │
│      │               │  _matches()   │               │               │             │
│      │               │───────┐       │               │               │             │
│      │               │       │ Compara nível        │               │             │
│      │               │       │ Verifica validade    │               │             │
│      │               │       │ Calcula score        │               │             │
│      │               │◀──────┘       │               │               │             │
│      │               │               │               │               │             │
│      │  9. MatchResult               │               │               │             │
│      │  { status,    │               │               │               │             │
│      │    score,     │               │               │               │             │
│      │    matches[] }│               │               │               │             │
│      │◀──────────────│               │               │               │             │
│      │               │               │               │               │             │
│                                                                                     │
└─────────────────────────────────────────────────────────────────────────────────────┘
```

---

*Diagramas de Sequência elaborados em Novembro/2024.*
